<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    background:#F8FAFC;
    color:#1E293B;
    overflow:hidden;
  }
  header{
    position:fixed;
    top:0; left:0; right:0;
    background:#F8FAFC;
    border-bottom:1px solid #E2E8F0;
    padding:16px 20px;
    z-index:10;
  }
header h1{
    margin:0;
    font-size:20px;
    font-weight:600;
  }
  header p{
    margin:6px 0 0 0;
    font-size:12px;
    color:#475569;
  }

  .main{
    position:absolute;
    top:64px;
    bottom:0;
    left:0;
    right:0;
    display:flex;
  }
  .column{
    flex:1;
    overflow:auto;
    padding:28px;
  }
  .column:first-child{
    border-right:1px solid #E2E8F0;
  }

  /* PRD Sections */
  .section{
    background:white;
    border:1px solid #E2E8F0;
    border-radius:20px;
    margin-bottom:24px;
    box-shadow:0 8px 24px rgba(15,23,42,0.04);
  }
  .section-header{
    padding:18px 20px;
    font-weight:600;
    font-size:16px;
    border-bottom:1px solid #F1F5F9;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .chev{
    width:10px; height:10px;
    border-right:2px solid #94A3B8;
    border-bottom:2px solid #94A3B8;
    transform:rotate(45deg);
    margin-top:-2px;
    flex:0 0 auto;
  }
  .section-header[aria-expanded="false"] .chev{
    transform:rotate(-45deg);
    margin-top:2px;
  }
  .section-content{
    padding:20px;
    font-size:14px;
    line-height:1.8;
  }
  .section-content h3{
    margin:0 0 8px 0;
    font-size:14px;
  }
  .section-content h4{
    margin:16px 0 8px 0;
    font-size:13px;
    text-transform:uppercase;
    letter-spacing:0.04em;
    color:#475569;
  }
  .section-content ul{
    padding-left:20px;
    margin:8px 0 16px 0;
  }
  .section-content li{
    margin-bottom:6px;
  }
  .muted{
    color:#475569;
  }
  .pill{
    display:inline-block;
    font-size:11px;
    padding:4px 10px;
    border-radius:999px;
    border:1px solid #E2E8F0;
    background:#F8FAFC;
    color:#334155;
    margin-left:8px;
    line-height:1.2;
    white-space:nowrap;
  }
  .callout{
    border:1px solid #E2E8F0;
    background:#F8FAFC;
    border-radius:14px;
    padding:12px 14px;
    margin:10px 0 14px 0;
  }
  .formula{
    background:#F1F5F9;
    padding:14px;
    border-radius:14px;
    border:1px solid #E2E8F0;
    margin:12px 0;
    font-size:14px;
    line-height:1.6;
  }
  .grid2{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
  }
  .grid2 .callout{ margin:0; }
  @media(max-width:980px){
    .grid2{ grid-template-columns:1fr; }
  }

  /* Mobile Simulator */
  .simulator-frame{
    border:1px solid #E2E8F0;
    border-radius:48px;
    background:white;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .mobile-frame{
    width:390px;
    height:780px;
    border-radius:48px;
    overflow:hidden;
    background:#F8FAFC;
    display:flex;
    flex-direction:column;
    box-shadow:0 20px 40px rgba(15,23,42,0.08);
  }
  .kamp-hero{
    height:180px;
    background:linear-gradient(180deg,#6B2D6D,#8A3E8E);
    color:white;
    padding:20px;
    display:flex;
    flex-direction:column;
    justify-content:flex-end;
    position:relative;
  }
  .hero-actions{
    position:absolute;
    top:14px;
    right:14px;
    display:flex;
    gap:10px;
    opacity:0.95;
  }
  .icon-btn{
    width:34px;
    height:34px;
    border-radius:12px;
    background:rgba(255,255,255,0.20);
    border:1px solid rgba(255,255,255,0.25);
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  .icon{
    width:16px;height:16px;
    position:relative;
  }
  .icon.gear:before,.icon.gear:after{
    content:"";
    position:absolute;
    inset:0;
    border:2px solid rgba(255,255,255,0.9);
    border-radius:50%;
  }
  .icon.share:before{
    content:"";
    position:absolute;
    left:1px; top:7px;
    width:14px; height:2px;
    background:rgba(255,255,255,0.9);
    transform:rotate(-25deg);
    border-radius:2px;
  }
  .icon.camera:before{
    content:"";
    position:absolute;
    left:1px; top:4px;
    width:14px; height:10px;
    border:2px solid rgba(255,255,255,0.9);
    border-radius:3px;
  }
  .icon.camera:after{
    content:"";
    position:absolute;
    left:6px; top:7px;
    width:4px; height:4px;
    border:2px solid rgba(255,255,255,0.9);
    border-radius:50%;
  }

  .kamp-title{
    font-size:20px;
    font-weight:600;
  }
  .kamp-sub{
    font-size:12px;
    opacity:0.85;
    margin-top:4px;
    display:flex;
    align-items:center;
    gap:8px;
    flex-wrap:wrap;
  }
  .tag-chip{
    background:rgba(255,255,255,0.18);
    border:1px solid rgba(255,255,255,0.22);
    border-radius:999px;
    padding:4px 10px;
    font-size:12px;
  }

  .tabs{
    display:flex;
    background:white;
    border-bottom:1px solid #E2E8F0;
    padding:10px 12px;
    gap:10px;
  }
  .tab{
    flex:1;
    text-align:center;
    padding:10px 12px;
    font-size:14px;
    font-weight:600;
    border-radius:14px;
    border:1px solid #E2E8F0;
    background:#F8FAFC;
    color:#64748B;
    cursor:pointer;
  }
  .tab.active{
    background:#F1EAF4;
    color:#6B2D6D;
    border-color:#E2E8F0;
  }

  .feed{
    flex:1;
    overflow:auto;
    padding-bottom:14px;
  }
  .card{
    background:white;
    border:1px solid #E2E8F0;
    border-radius:24px;
    margin:16px;
    padding:16px;
    box-shadow:0 8px 24px rgba(15,23,42,0.05);
  }
  .card-head{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:12px;
    margin-bottom:10px;
  }
  .card-title{
    font-weight:700;
    line-height:1.2;
  }
  .meta{
    font-size:12px;
    opacity:0.65;
    margin-top:6px;
  }
  .kebab{
    width:34px;height:34px;
    border-radius:12px;
    border:1px solid #E2E8F0;
    background:#F8FAFC;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    flex:0 0 auto;
  }
  .kebab:before{
    content:"";
    width:4px;height:4px;border-radius:50%;
    background:#64748B;
    box-shadow:0 -8px 0 #64748B, 0 8px 0 #64748B;
    display:block;
  }

  .badge{
    display:inline-block;
    font-size:11px;
    padding:4px 10px;
    border-radius:999px;
    border:1px solid #E2E8F0;
    margin-left:8px;
    background:#F8FAFC;
    color:#334155;
    font-weight:600;
  }
  .poll-option{
    border:1px solid #E2E8F0;
    border-radius:16px;
    padding:10px 12px;
    margin-top:10px;
    cursor:pointer;
    background:#FFFFFF;
  }
  .poll-option:hover{ background:#F8FAFC; }
  .poll-option.selected{
    background:#EEF2FF;
    border-color:#CBD5E1;
  }

  .inline-btn{
    margin-top:12px;
    padding:10px 12px;
    border-radius:14px;
    border:1px solid #E2E8F0;
    background:#F8FAFC;
    cursor:pointer;
    font-weight:600;
    color:#334155;
  }
  .inline-btn:hover{ background:#F1F5F9; }

  /* Settings sheet (in-simulator) */
  .sheet-overlay{
    position:absolute;
    inset:0;
    background:rgba(15,23,42,0.35);
    display:none;
    align-items:flex-start;
    justify-content:center;
    padding:14px;
  }
  .sheet{
    width:100%;
    max-width:360px;
    margin-top:70px;
    border-radius:26px;
    overflow:hidden;
    border:1px solid #E2E8F0;
    background:white;
    box-shadow:0 24px 64px rgba(15,23,42,0.25);
  }
  .sheet-header{
    background:linear-gradient(180deg,#6B2D6D,#8A3E8E);
    color:white;
    padding:16px 16px 14px 16px;
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:10px;
  }
  .sheet-title{
    font-weight:700;
    font-size:18px;
  }
  .sheet-sub{
    margin-top:10px;
    padding:10px 12px;
    border:1px solid rgba(255,255,255,0.25);
    background:rgba(255,255,255,0.16);
    border-radius:14px;
    font-size:13px;
    display:flex;
    justify-content:space-between;
    gap:8px;
  }
  .sheet-close{
    width:34px;height:34px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.28);
    background:rgba(255,255,255,0.16);
    color:white;
    font-weight:800;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    flex:0 0 auto;
  }
  .sheet-body{
    padding:14px;
  }
  .sheet-group-label{
    font-size:12px;
    letter-spacing:0.06em;
    text-transform:uppercase;
    color:#94A3B8;
    margin:10px 6px;
    font-weight:700;
  }
  .sheet-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:12px;
    border:1px solid #E2E8F0;
    border-radius:18px;
    background:#FFFFFF;
    margin-bottom:10px;
  }
  .sheet-left{
    display:flex;
    gap:12px;
    align-items:center;
    min-width:0;
  }
  .sheet-icon{
    width:38px;height:38px;
    border-radius:14px;
    background:#F1EAF4;
    border:1px solid #E2E8F0;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#6B2D6D;
    font-weight:900;
    flex:0 0 auto;
  }
  .sheet-text{
    min-width:0;
  }
  .sheet-text b{
    display:block;
    font-size:14px;
  }
  .sheet-text span{
    display:block;
    font-size:12px;
    color:#64748B;
    margin-top:2px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    max-width:220px;
  }
  .sheet-arrow{
    width:8px;height:8px;
    border-right:2px solid #94A3B8;
    border-bottom:2px solid #94A3B8;
    transform:rotate(-45deg);
    margin-right:4px;
    flex:0 0 auto;
  }

  @media(max-width:768px){
    .main{flex-direction:column;}
    .column:first-child{border-right:none;border-bottom:1px solid #E2E8F0;}
  }
</style>
</head>

<body>
<header>
  <h1>Interactive iPRD</h1>
  <p>Kamp - AI Features iPRD</p>
</header>

<div class="main">
  <!-- LEFT: PRD -->
  <div class="column">

    <div class="section">
      <div class="section-header" onclick="toggle(this)" aria-expanded="true">
        <span>1. Problem</span><span class="chev"></span>
      </div>
      <div class="section-content">
        Kamps lack structured engagement loops.
        Admins cannot intentionally steer discussions.
        Users miss high-signal content in noisy feeds.
        There is no intelligent daily recap per Kamp.
      </div>
    </div>

    <div class="section">
      <div class="section-header" onclick="toggle(this)" aria-expanded="true">
        <span>2. Personas</span><span class="chev"></span>
      </div>
      <div class="section-content">
        <ul>
          <li><b>Admin</b> ‚Äî creates prompts/polls, schedules, pins, monitors participation.</li>
          <li><b>User</b> ‚Äî consumes Kamp feed, votes/comments, relies on wrap-ups to catch up.</li>
          <li><b>AI Expert</b> ‚Äî configures AI prompt suggestions, moderation hooks, summary tone + email digest tuning.</li>
          <li><b>Flutter Dev</b> ‚Äî mobile UI implementation for prompts/polls/wrap-ups + in-app notifications UX.</li>
          <li><b>Go Dev</b> ‚Äî backend models, state machines, workers/cron, scoring, aggregation, delivery tracking.</li>
        </ul>
      </div>
    </div>

    <div class="section">
      <div class="section-header" onclick="toggle(this)" aria-expanded="true">
        <span>3. Goals & Metrics</span><span class="chev"></span>
      </div>
      <div class="section-content">
        <ul>
          <li>Increase Kamp engagement (votes + comments) via admin-driven prompts/polls.</li>
          <li>Increase daily retention by providing daily in-app wrap-ups per Kamp.</li>
          <li>Improve discovery of high-signal content (top posts / trending discussions).</li>
        </ul>
        <div class="callout">
          <b>Primary metrics</b><br />
          <span class="muted">Prompt participation rate, Poll vote completion, Daily wrap-up view + expand rate, DAU per Kamp, Comment volume, Bookmark rate.</span>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-header" onclick="toggle(this)" aria-expanded="true">
        <span>4. Features</span><span class="chev"></span>
      </div>
      <div class="section-content">
        <div class="callout">
          <b>Feature 2.1 - Admin Prompts & Polls</b>
          <span class="pill">Admin Surface</span>
        </div>

        <h3>Functional Requirements</h3>
        <ul>
          <li>Admin creates <b>Discussion Prompt</b> (text) and publishes immediately or schedules.</li>
          <li>Admin creates <b>Poll</b> (2‚Äì4 options), publishes immediately or schedules.</li>
          <li><b>Expiration</b> required for prompts and polls (default supported). Expiration enforced server-side.</li>
          <li><b>Pin to top of feed</b> for prompts/polls (backend pin priority sorting already completed by Go Dev).</li>
          <li>Basic moderation hook support and AI prompt suggestion wiring (configurable by AI expert).</li>
        </ul>

        <h3>State Machines</h3>
        <ul>
          <li><b>Prompts:</b> Draft ‚Üí Scheduled ‚Üí Live ‚Üí Expired ‚Üí Archived</li>
          <li><b>Polls:</b> Draft ‚Üí Live ‚Üí Closed ‚Üí Archived</li>
        </ul>

        <h3>Engineering Ownership</h3>
        <div class="grid2">
          <div class="callout">
            <b>Flutter Dev</b>
            <ul>
              <li>Prompt creation UI</li>
              <li>Scheduling picker (publish_at)</li>
              <li>Poll creation UI (2‚Äì4 options)</li>
              <li>Pin indicator + sticky rendering at top of feed</li>
              <li>Admin UX states: draft/scheduled/live/expired</li>
            </ul>
          </div>
          <div class="callout">
            <b>Go Dev</b>
            <ul>
              <li>CRUD for prompts/polls</li>
              <li>Vote tracking + option distribution</li>
              <li>Scheduling/expiration workers (publish/expire)</li>
              <li><b>Pin priority sort (completed)</b></li>
              <li>State transitions + audit fields</li>
            </ul>
          </div>
        </div>

        <div class="callout">
          <b>AI Expert</b>
          <ul>
            <li>Configure AI prompt suggestion behavior (topics like LinkedIn)</li>
            <li>Configure moderation rule hooks (pre/post publish checks)</li>
          </ul>
        </div>

        <hr style="border:none;border-top:1px solid #F1F5F9;margin:18px 0;" />

        <div class="callout">
          <b>Feature 2.2 - Daily Content Wrap-Ups</b>
          <span class="pill">User Surface</span>
          <span class="pill">Per Kamp</span>
          <span class="pill">Daily</span>
        </div>

        <h3>Scope</h3>
        <ul>
          <li>Generated <b>daily</b> for <b>every Kamp</b> independently.</li>
          <li>Visible <b>inside the app</b> within each Kamp feed (first card, next-day delivery).</li>
          <li>Timezone-aware 24-hour window per Kamp.</li>
        </ul>

        <h3>Wrap-Up Contents (Daily)</h3>
        <ul>
          <li>Top 3 posts by weighted engagement score (last 24h)</li>
          <li>Most commented thread</li>
          <li>Top prompt response distribution (if prompt/poll present)</li>
          <li>New members count (last 24h)</li>
        </ul>

        <h3>State Machine</h3>
        <ul>
          <li><b>Wrap-ups:</b> Generated ‚Üí Delivered ‚Üí Viewed ‚Üí Expanded</li>
        </ul>

        <h3>In-App Notifications</h3>
        <ul>
          <li>Push eligible only if user active in last 7 days</li>
          <li>Kamp-level preference respected</li>
          <li>Deep link to wrap-up card in Kamp feed</li>
        </ul>

        <h3>Email Digest (Optional Channel)</h3>
        <ul>
          <li>If daily email digest enabled: AI expert tweaks current email digest template to include daily Kamp wrap-up section.</li>
          <li>Go handles subscriber-based triggering + delivery tracking.</li>
        </ul>

        <h3>Engineering Ownership</h3>
        <div class="grid2">
          <div class="callout">
            <b>Flutter Dev</b>
            <ul>
              <li>Daily wrap-up card UI inside Kamp feed</li>
              <li>Expandable detail breakdown view</li>
              <li>In-app notification UX + deep link handling</li>
            </ul>
          </div>
          <div class="callout">
            <b>Go Dev</b>
            <ul>
              <li>24h aggregation job per Kamp</li>
              <li>Engagement ranking + wrap-up payload</li>
              <li>Delivery tracking (delivered/viewed/expanded)</li>
              <li>Push notification dispatch rules</li>
            </ul>
          </div>
        </div>

        <div class="callout">
          <b>AI Expert</b>
          <ul>
            <li>Summary tone tuning</li>
            <li>Ranking explanation formatting (why top content is top)</li>
            <li>Email digest copy/layout adjustments (if enabled)</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-header" onclick="toggle(this)" aria-expanded="true">
        <span>5. Engagement Scoring</span><span class="chev"></span>
      </div>
      <div class="section-content">
        <h3>Weighted Formula</h3>
        <div class="formula">
          Score =
          (likes √ó 1.0) +
          (comments √ó 2.0) +
          (shares √ó 3.0) +
          (bookmarks √ó 3.0) +
          (views √ó 0.2)
        </div>
        <ul>
          <li>Calculated server-side in Go.</li>
          <li>Used for ranking daily wrap-up highlights and selecting Top Post.</li>
          <li>Timezone-aware 24-hour window per Kamp.</li>
        </ul>
      </div>
    </div>

    <div class="section">
      <div class="section-header" onclick="toggle(this)" aria-expanded="true">
        <span>6. Timeline (Detailed ‚Äî All Work Items)</span><span class="chev"></span>
      </div>
      <div class="section-content">

        <div class="callout">
          <b>Phase 1: Core Models + Prompt/Poll Foundations (Days 1‚Äì4)</b>
          <ul>
            <li>Finalize schemas and state machines:
              <ul>
                <li>Prompts: Draft ‚Üí Scheduled ‚Üí Live ‚Üí Expired ‚Üí Archived</li>
                <li>Polls: Draft ‚Üí Live ‚Üí Closed ‚Üí Archived</li>
                <li>Wrap-ups: Generated ‚Üí Delivered ‚Üí Viewed ‚Üí Expanded</li>
              </ul>
            </li>
            <li>Lock UX wireframes (mobile) and API contracts.</li>
            <li>Define cron/worker contracts for publish / expire / wrap-up.</li>
          </ul>
          <b>Output:</b> approved backend contract + frozen UI scope
        </div>

        <div class="callout">
          <b>Phase 2: Prompts + Polls Delivery (Days 5‚Äì10)</b>
          <h4>Flutter</h4>
          <ul>
            <li>Prompt creation UI</li>
            <li>Scheduling picker (future publish)</li>
            <li>Poll creation UI (2‚Äì4 options)</li>
            <li>Pin indicator + sticky pinned rendering in feed</li>
          </ul>

          <h4>Go</h4>
          <ul>
            <li>CRUD APIs for prompts/polls</li>
            <li>Vote tracking + aggregation</li>
            <li>Scheduling/expiration jobs (publish_at / expire_at)</li>
            <li>Pin priority sort integration (backend already completed)</li>
          </ul>

          <h4>AI</h4>
          <ul>
            <li>Basic moderation rule hooks</li>
            <li>AI prompt suggestion endpoint wiring</li>
          </ul>

          <b>Output:</b> admins can create/schedule/pin prompts and launch polls end-to-end
        </div>

        <div class="callout">
          <b>Phase 3: Daily Wrap-Up Engine + In-App Experience (Days 11‚Äì15)</b>
          <h4>Go</h4>
          <ul>
            <li>24h aggregation job per Kamp</li>
            <li>Engagement ranking (weighted scoring)</li>
            <li>Wrap-up payload generation (daily)</li>
          </ul>

          <h4>Flutter</h4>
          <ul>
            <li>Wrap-up card inside Kamp feed</li>
            <li>Expandable detail breakdown view</li>
          </ul>

          <h4>Push Notification Rules</h4>
          <ul>
            <li>Active in last 7 days</li>
            <li>Kamp-level preference respected</li>
            <li>Deep link to wrap-up card</li>
          </ul>

          <b>Output:</b> daily wrap-up generated and visible in-app with notification path
        </div>

        <div class="callout">
          <b>Phase 4: AI Summary + Email Digest Integration + Hardening (Days 16‚Äì20)</b>
          <h4>AI</h4>
          <ul>
            <li>Summary tone tuning</li>
            <li>Ranking explanation formatting</li>
          </ul>

          <h4>Digest</h4>
          <ul>
            <li>Integrate daily Kamp wrap-up section into email template/pipeline</li>
          </ul>

          <h4>Go</h4>
          <ul>
            <li>Subscriber-based digest triggering</li>
            <li>Delivery tracking</li>
          </ul>

          <h4>Quality</h4>
          <ul>
            <li>Full QA/regression</li>
            <li>Edge cases: timezone handling, expiry boundaries</li>
            <li>Rollout checks</li>
          </ul>

          <b>Output:</b> push + email both production-ready
        </div>

        <div class="callout">
          <b>Total:</b> ~20 working days (~1 month)<br />
          <span class="muted">With smooth execution and no major scope changes, this is the complete phased timeline including AI + email digest.</span>
        </div>

      </div>
    </div>

  </div>

  <!-- RIGHT: MOBILE SIMULATOR -->
  <div class="column">
    <div class="simulator-frame">
      <div class="mobile-frame" id="mobileRoot" style="position:relative;">

        <div class="kamp-hero">
          <div class="hero-actions">
            <div class="icon-btn" title="Camera"><div class="icon camera"></div></div>
            <div class="icon-btn" title="Share"><div class="icon share"></div></div>
            <div class="icon-btn" title="Settings" onclick="toggleSettings(true)"><div class="icon gear"></div></div>
          </div>

          <div class="kamp-title">WeKamp HQ</div>
          <div class="kamp-sub">
            <span>6 members ‚Ä¢ Private</span>
            <span class="tag-chip">#Tech</span>
          </div>
        </div>

        <div class="tabs">
          <div class="tab active" id="tabFeed" onclick="setTab('feed')">Feed</div>
          <div class="tab" id="tabRepo" onclick="setTab('repo')">Repository</div>
        </div>

        <div class="feed" id="screenFeed">
          <div class="card">
            <div class="card-head">
              <div>
                <div class="card-title">üìä Daily Wrap-Up <span class="badge">Auto</span></div>
                <div class="meta">Last 24 hours in this Kamp</div>
              </div>
              <div class="kebab" title="More"></div>
            </div>

            Top Post: AI Security Debate<br />
            Most Comments: AI Agents Thread<br />
            Top Prompt: LinkedIn Growth? (72% Yes)<br />
            New Members: 4<br />

            <button class="inline-btn" onclick="appendWrapDetails()">View Full Breakdown</button>
          </div>

          <div class="card">
            <div class="card-head">
              <div>
                <div class="card-title">üìå Admin Prompt <span class="badge">Pinned</span></div>
                <div class="meta">Scheduled ‚Ä¢ Expires in 18h</div>
              </div>
              <div class="kebab" title="More"></div>
            </div>

            Should we discuss LinkedIn growth strategies today?
            <div class="poll-option" onclick="selectOption(this)">Yes ‚Äî Share tactics</div>
            <div class="poll-option" onclick="selectOption(this)">No ‚Äî Different topic</div>
          </div>

          <div class="card">
            <div class="card-head">
              <div>
                <div class="card-title">OpenClaw & AI Security</div>
                <div class="meta">Rishabh ‚Ä¢ 45 comments</div>
              </div>
              <div class="kebab" title="More"></div>
            </div>
            OpenClaw is being hailed as the next big thing in personal AI, but it comes with some serious red flags...
          </div>
        </div>

        <div class="feed" id="screenRepo" style="display:none;">
          <div class="card">
            <div class="card-title">Repository</div>
            <div class="meta">Kamp documents & links</div>
            <div class="callout" style="margin:12px 0 0 0;">
              <b>Placeholder</b><br />
              <span class="muted">Repository UI is out of scope for this feature set. Included only to mirror the existing app surface.</span>
            </div>
          </div>
        </div>

        <!-- Settings Sheet Overlay -->
        <div class="sheet-overlay" id="settingsOverlay" onclick="overlayClick(event)">
          <div class="sheet" onclick="event.stopPropagation()">
            <div class="sheet-header">
              <div>
                <div class="sheet-title">Kamp Settings</div>
                <div class="sheet-sub">
                  <span>Viewing as yourself</span>
                  <b style="text-decoration:underline;cursor:pointer;">Change</b>
                </div>
              </div>
              <div class="sheet-close" onclick="toggleSettings(false)">√ó</div>
            </div>

            <div class="sheet-body">
              <div class="sheet-group-label">Community</div>

              <div class="sheet-row">
                <div class="sheet-left">
                  <div class="sheet-icon">üë•</div>
                  <div class="sheet-text">
                    <b>Members</b>
                    <span>View all members</span>
                  </div>
                </div>
                <div class="sheet-arrow"></div>
              </div>

              <div class="sheet-row">
                <div class="sheet-left">
                  <div class="sheet-icon">üõ°Ô∏è</div>
                  <div class="sheet-text">
                    <b>Kamp Guides</b>
                    <span>View Kamp Guides</span>
                  </div>
                </div>
                <div class="sheet-arrow"></div>
              </div>

              <div class="sheet-row">
                <div class="sheet-left">
                  <div class="sheet-icon">üìú</div>
                  <div class="sheet-text">
                    <b>Kampsite Rules</b>
                    <span>Community guidelines</span>
                  </div>
                </div>
                <div class="sheet-arrow"></div>
              </div>

              <div class="sheet-group-label">Management</div>

              <div class="sheet-row">
                <div class="sheet-left">
                  <div class="sheet-icon">‚úèÔ∏è</div>
                  <div class="sheet-text">
                    <b>Edit Details</b>
                    <span>Update Kamp information</span>
                  </div>
                </div>
                <div class="sheet-arrow"></div>
              </div>

              <div class="sheet-row">
                <div class="sheet-left">
                  <div class="sheet-icon">üé®</div>
                  <div class="sheet-text">
                    <b>Theme</b>
                    <span>Customize appearance</span>
                  </div>
                </div>
                <div class="sheet-arrow"></div>
              </div>

              <div class="sheet-row">
                <div class="sheet-left">
                  <div class="sheet-icon">üìä</div>
                  <div class="sheet-text">
                    <b>Dashboard</b>
                    <span>View analytics & insights</span>
                  </div>
                </div>
                <div class="sheet-arrow"></div>
              </div>

              <div class="sheet-group-label">Other</div>

              <div class="sheet-row">
                <div class="sheet-left">
                  <div class="sheet-icon">‚ÑπÔ∏è</div>
                  <div class="sheet-text">
                    <b>Kamp Info</b>
                    <span>About this Kamp</span>
                  </div>
                </div>
                <div class="sheet-arrow"></div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
  function toggle(headerEl){
    const content = headerEl.nextElementSibling;
    const expanded = headerEl.getAttribute('aria-expanded') !== 'false';
    headerEl.setAttribute('aria-expanded', expanded ? 'false' : 'true');
    content.style.display = expanded ? 'none' : 'block';
  }

  function setTab(which){
    const feed = document.getElementById('screenFeed');
    const repo = document.getElementById('screenRepo');
    const tabFeed = document.getElementById('tabFeed');
    const tabRepo = document.getElementById('tabRepo');

    if(which === 'feed'){
      feed.style.display = 'block';
      repo.style.display = 'none';
      tabFeed.classList.add('active');
      tabRepo.classList.remove('active');
    }else{
      feed.style.display = 'none';
      repo.style.display = 'block';
      tabRepo.classList.add('active');
      tabFeed.classList.remove('active');
    }
  }

  function selectOption(el){
    const parent = el.parentElement;
    const opts = parent.querySelectorAll('.poll-option');
    opts.forEach(o => o.classList.remove('selected'));
    el.classList.add('selected');
  }

  function appendWrapDetails(){
    const feed = document.getElementById('screenFeed');
    const existing = document.getElementById('wrapDetailCard');
    if(existing) { existing.scrollIntoView({behavior:'smooth', block:'start'}); return; }

    const card = document.createElement('div');
    card.className = 'card';
    card.id = 'wrapDetailCard';
    card.innerHTML = `
      <div class="card-head">
        <div>
          <div class="card-title">Full Daily Breakdown <span class="badge">Expanded</span></div>
          <div class="meta">Ranked by weighted engagement score</div>
        </div>
        <div class="kebab" title="More"></div>
      </div>
      <b>Top Posts</b><br/>
      1) AI Security Debate ‚Äî 284.6 score<br/>
      2) LinkedIn Growth Hacks ‚Äî 212.4 score<br/>
      3) Privacy Thread ‚Äî 190.0 score<br/><br/>
      <b>Why this ranking?</b><br/>
      Likes (1.0), Comments (2.0), Shares (3.0), Bookmarks (3.0), Views (0.2).<br/>
      Window: last 24 hours (Kamp timezone).
    `;
    feed.appendChild(card);
    card.scrollIntoView({behavior:'smooth', block:'start'});
  }

  function toggleSettings(open){
    const overlay = document.getElementById('settingsOverlay');
    overlay.style.display = open ? 'flex' : 'none';
  }

  function overlayClick(e){
    // clicking outside sheet closes
    toggleSettings(false);
  }
</script>
</body>
</html>
